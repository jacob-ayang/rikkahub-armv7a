# âœ… GitHub Actions å·¥ä½œæµè®¾ç½®æŒ‡å—

## é—®é¢˜å·²è§£å†³ï¼

ä¹‹å‰çš„ `Keystore file not found` é”™è¯¯å·²ä¿®å¤ã€‚å·¥ä½œæµç°å·²ç®€åŒ–ï¼š
- âœ… **ä»…éœ€ 1 ä¸ª Secret**ï¼ˆä¹‹å‰éœ€è¦ 2-3 ä¸ªï¼‰
- âœ… **å®Œå…¨è‡ªåŠ¨åŒ–**ï¼ˆæ— éœ€æ‰‹åŠ¨é…ç½®å¯†ç ï¼‰
- âœ… **è·¯å¾„é—®é¢˜å·²è§£å†³**ï¼ˆkeystore æ–‡ä»¶æ­£ç¡®ä½ç½®ï¼‰

---

## ğŸ“ è®¾ç½®æ­¥éª¤ï¼ˆ3 åˆ†é’Ÿï¼‰

### 1ï¸âƒ£ è·å– KEY_BASE64 Secret å€¼

ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©ï¼š

**é€‰é¡¹ Aï¼šä½¿ç”¨æœ¬åœ°å·²ç”Ÿæˆçš„å¯†é’¥ï¼ˆæ¨èï¼‰**

åœ¨æœ¬åœ°è®¡ç®—æœºè¿è¡Œï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /workspaces/rikkahub-armv7a

# ç”Ÿæˆ Base64
cat rikkahub.jks | base64 -w 0
```

å¤åˆ¶è¾“å‡ºçš„å®Œæ•´å­—ç¬¦ä¸²ï¼ˆçº¦ 3500 å­—ç¬¦ï¼‰ã€‚

**é€‰é¡¹ Bï¼šæŸ¥çœ‹æœ¬åœ°ç”Ÿæˆçš„æ–‡ä»¶**

```bash
cat /workspaces/rikkahub-armv7a/.keystore_base64
```

ç›´æ¥å¤åˆ¶å…¨éƒ¨å†…å®¹ã€‚

**é€‰é¡¹ Cï¼šä½¿ç”¨æœ¬é¡¹ç›®ä¸­å·²æä¾›çš„è„šæœ¬**

```bash
./scripts/setup-workflow.sh
```

æŒ‰ç…§æç¤ºæ“ä½œï¼Œæœ€åä¼šæ˜¾ç¤º BASE64 å­—ç¬¦ä¸²ã€‚

---

### 2ï¸âƒ£ æ·»åŠ  Secret åˆ° GitHub

1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“
2. è¿›å…¥ **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. ç‚¹å‡» **New repository secret**
4. å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Name:** `KEY_BASE64`
   - **Value:** [ç²˜è´´ä¸Šé¢å¤åˆ¶çš„å®Œæ•´ Base64 å­—ç¬¦ä¸²]
5. ç‚¹å‡» **Add secret**

**å°±è¿™æ ·ï¼** ä¸éœ€è¦å…¶ä»– Secretã€‚

---

### 3ï¸âƒ£ éªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
./scripts/validate-workflow.sh
```

åº”è¯¥çœ‹åˆ°ï¼š
```
âœ“ Workflow configuration is valid
âœ“ All required files present
âœ“ Build flavors configured
âœ“ Next Steps: Add KEY_BASE64 secret to GitHub
```

---

## ğŸš€ è§¦å‘ç¼–è¯‘

### æ–¹å¼ 1ï¼šè‡ªåŠ¨ç¼–è¯‘ï¼ˆæ¨èï¼‰

åªéœ€æ¨é€ä»£ç åˆ° `master` åˆ†æ”¯ï¼Œå·¥ä½œæµä¼šè‡ªåŠ¨è¿è¡Œï¼š

```bash
git push origin master
```

ç¼–è¯‘å®Œæˆåï¼Œè¿›å…¥ **Actions** æŸ¥çœ‹ç»“æœã€‚

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨è§¦å‘

1. è¿›å…¥ GitHub ä»“åº“ â†’ **Actions**
2. é€‰æ‹©å·¥ä½œæµï¼š
   - **build-armv7** - ç¼–è¯‘ ARM v7 ç‰ˆæœ¬ï¼ˆ32 ä½ï¼Œé€‚åˆè€è®¾å¤‡ï¼‰
   - **build-universal** - ç¼–è¯‘ Universal ç‰ˆæœ¬ï¼ˆ64 ä½ï¼Œé€‚åˆæ–°è®¾å¤‡ï¼‰
   - **build-all** - åŒæ—¶ç¼–è¯‘ä¸¤ä¸ªç‰ˆæœ¬
3. ç‚¹å‡» **Run workflow** â†’ **Run workflow**

ç¼–è¯‘ä¼šåœ¨çº¦ 8-10 åˆ†é’Ÿåå®Œæˆï¼ˆå«ä¸‹è½½ä¾èµ–æ—¶é—´ï¼‰ã€‚

---

## ğŸ“¦ è·å–ç¼–è¯‘ç»“æœ

### APK ä½ç½®

ç¼–è¯‘æˆåŠŸåï¼Œè¿›å…¥ **Actions** â†’ å¯¹åº”çš„ workflow runï¼š

1. **Artifacts** éƒ¨åˆ†å¯ä»¥ä¸‹è½½ APK æ–‡ä»¶
2. **Releases** æ ‡ç­¾å¯ä»¥æ‰¾åˆ°å·²å‘å¸ƒçš„ç‰ˆæœ¬

### æ–‡ä»¶åæ ¼å¼

```
rikkahub-armv7-release-<ç‰ˆæœ¬å·>-<æ—¶é—´æˆ³>.apk
rikkahub-universal-release-<ç‰ˆæœ¬å·>-<æ—¶é—´æˆ³>.apk
```

---

## âš™ï¸ ç­¾åé…ç½®ä¿¡æ¯

ä¸ºäº†é¿å…æš´éœ²å‡­è¯ï¼Œç­¾åå¯†ç å·²ç›´æ¥ç¡¬ç¼–ç åœ¨å·¥ä½œæµä¸­ï¼š

| é¡¹ç›® | å€¼ |
|------|-----|
| Keystore æ–‡ä»¶ | `rikkahub.jks` |
| Store Password | `rikkahub@123` |
| Key Alias | `rikkahub` |
| Key Password | `rikkahub@123` |
| Validity | 10,000 å¤© |

**âš ï¸ é‡è¦ï¼š** `.jks` æ–‡ä»¶å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ° GitHubã€‚

---

## ğŸ” æ•…éšœæ’æŸ¥

### âŒ é”™è¯¯ï¼šSecrets not found

**åŸå› ï¼š** æœªæ·»åŠ  KEY_BASE64 Secret

**è§£å†³ï¼š**
1. æ£€æŸ¥ GitHub Settings â†’ Secrets and variables
2. ç¡®è®¤ Secret åç§°ä¸º `KEY_BASE64`ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰
3. ç¡®è®¤å€¼ä¸ä¸ºç©ºï¼ˆåº”çº¦ 3500 å­—ç¬¦ï¼‰

### âŒ é”™è¯¯ï¼šAPK build failed

**åŸå› ï¼š** å¯èƒ½æ˜¯ä»£ç é—®é¢˜æˆ–ä¾èµ–é—®é¢˜

**è§£å†³ï¼š**
1. æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•ï¼š
   ```bash
   ./gradlew assembleArmv7Release --stacktrace
   ```
3. ä¿®å¤åæ¨é€ä»£ç ï¼Œé‡æ–°è§¦å‘å·¥ä½œæµ

### âŒ é”™è¯¯ï¼šgoogle-services.json not found

**åŸå› ï¼š** æ–‡ä»¶è¢« Git å¿½ç•¥æˆ–ä½ç½®ä¸æ­£ç¡®

**è§£å†³ï¼š**
1. ç¡®è®¤ `app/google-services.json` å­˜åœ¨
2. å¦‚æœè¢« `.gitignore` å¿½ç•¥ï¼Œéœ€è¦ï¼š
   - è¦ä¹ˆä¿®æ”¹ `.gitignore` å¹¶æäº¤æ–‡ä»¶
   - è¦ä¹ˆåœ¨å·¥ä½œæµä¸­é€šè¿‡å…¶ä»–æ–¹å¼æä¾›ï¼ˆè”ç³»é¡¹ç›®ç»´æŠ¤è€…ï¼‰

---

## ğŸ“š æ›´å¤šä¿¡æ¯

- **è¯¦ç»†é…ç½®æŒ‡å—ï¼š** [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md)
- **å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼š** [QUICK_START_ARMV7.md](QUICK_START_ARMV7.md)
- **å¿«é€Ÿå‚è€ƒï¼š** [QUICK_REFERENCE.md](QUICK_REFERENCE.md)
- **å·¥ä½œæµè¯´æ˜ï¼š** [.github/workflows/README.md](.github/workflows/README.md)

---

## âœ… ä¸‹ä¸€æ­¥

1. è·å– `KEY_BASE64` Secret å€¼
2. åœ¨ GitHub ä»“åº“ä¸­æ·»åŠ  Secret
3. æ¨é€ä»£ç æˆ–æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ
4. åœ¨ Actions ä¸­æŸ¥çœ‹ç»“æœ
5. ä¸‹è½½ç¼–è¯‘çš„ APK æ–‡ä»¶

**ç¥ä½ ç¼–è¯‘é¡ºåˆ©ï¼ğŸ‰**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ä¸Šè¿°æ–‡æ¡£æˆ–æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚
